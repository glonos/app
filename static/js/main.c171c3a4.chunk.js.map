{"version":3,"sources":["Message.js","Messages.js","../../src/glonos.js","App.js","serviceWorker.js","index.js"],"names":["Message","props","message","timestamp","console","log","title","content","d","Date","react_default","a","createElement","Card","CardHeader","subheader","toDateString","toLocaleTimeString","CardContent","Typography","component","Messages","glonos","location","_useState","useState","_useState2","Object","slicedToArray","messages","setMessages","useEffect","find","then","results","handle","setInterval","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","sent","stop","clearInterval","length","map","data","i","src_Message","key","glonos_Glonos","Glonos","iota","classCallCheck","this","_iota","createClass","value","latlon_geohash","encode","lat","long","_hashLocation","slice","_generate","TAG","GEOHASH","DATA","MESSAGE","transfers","trytes","bundle","locationTag","JSON","stringify","address","tag","out_src","prepareTransfers","sendTrytes","abrupt","_x","_x2","_x3","apply","arguments","parse","extract_json_src","_find","_callee2","hash","hashes","bundles","_hash","_this","_context2","findTransactions","tags","t0","pop","getBundle","push","t1","b","_decode","_x4","getModalStyle","top","concat","left","transform","useStyles","makeStyles","theme","paper","position","width","backgroundColor","palette","background","border","boxShadow","shadows","padding","spacing","outline","App","classes","composeAPI","provider","setLocation","_useState3","_useState4","open","setOpen","_React$useState","React","modalStyle","_useState5","_useState6","setTitle","_useState7","_useState8","setContent","_useState9","_useState10","sending","setSending","_useState11","undefined","_useState12","geolocation","setGeolocation","handleClose","navigator","getCurrentPosition","_ref","pos","coords","latitude","longitude","_ref2","_callee3","_context3","className","Modal","aria-labelledby","aria-describedby","onClose","style","TextField","id","label","onChange","event","target","margin","variant","multiline","Fab","color","aria-label","onClick","_send","generate","send","CircularProgress","Send_default","src_Messages","Add_default","Boolean","window","hostname","match","ReactDOM","render","src_App","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c171c3a4.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nfunction Message(props) {\r\n  const { message, timestamp } = props;\r\n  console.log(message)\r\n  const { title, content, } = message;\r\n  const d = new Date(timestamp * 1000);\r\n  return (\r\n\r\n    <Card >\r\n      <CardHeader\r\n        title={title || 'no title'}\r\n        subheader={d.toDateString() + ' ' + d.toLocaleTimeString()}\r\n      />\r\n      <CardContent>\r\n        <Typography component=\"p\">\r\n          {content || 'no content'}\r\n        </Typography>\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\n\r\nexport default Message;","import React, { useState, useEffect } from 'react';\r\nimport Message from './Message'\r\n\r\nfunction Messages(props) {\r\n  const { glonos, location } = props;\r\n  const [messages, setMessages] = useState([]);\r\n\r\n  useEffect(() => {\r\n    console.log(\"EFFECT\")\r\n    if (location !== \"\")\r\n      glonos.find(location).then(results => {\r\n        setMessages(results);\r\n      });\r\n    const handle = setInterval(async () => {\r\n      if (location !== \"\") {\r\n        const results = await glonos.find(location);\r\n        setMessages(results);\r\n\r\n      }\r\n    }, 10000);\r\n\r\n\r\n    return () => { clearInterval(handle) }\r\n  }, [location]);\r\n\r\n  const renderItems = () => {\r\n    return messages.map((data, i) => <Message key={i} message={data.message} timestamp={data.timestamp} />)\r\n  }\r\n\r\n  return (<div>\r\n    {messages.length === 0 ? \"LOADING\" : renderItems()}\r\n\r\n  </div>\r\n  )\r\n}\r\n\r\nexport default Messages","import _regeneratorRuntime from \"C:\\\\Users\\\\marcu\\\\Documents\\\\Code\\\\TypeScript\\\\GeoChat\\\\client\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\marcu\\\\Documents\\\\Code\\\\TypeScript\\\\GeoChat\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\marcu\\\\Documents\\\\Code\\\\TypeScript\\\\GeoChat\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\marcu\\\\Documents\\\\Code\\\\TypeScript\\\\GeoChat\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport { asciiToTrytes } from '@iota/converter';\nimport { extractJson } from '@iota/extract-json';\nimport Geohash from 'latlon-geohash';\nvar ROOT = 'ABCDEFGABCDEFG999AAAA999999999999999999999999999999999999999999999999999999999999';\nvar ADDRESS = 'EQSAUZXULTTYZCLNJNTXQTQHOMOFZERHTCGTXOLAATVAHKSA9OGAZDEKECURBRIXIJWNPFCQIOGCJRTHZ';\nvar DEPTH = 3;\nvar WEIGHTMAGNITUDE = 14;\nexport var Glonos =\n/*#__PURE__*/\nfunction () {\n  function Glonos(iota) {\n    _classCallCheck(this, Glonos);\n\n    this._iota = iota;\n  }\n\n  _createClass(Glonos, [{\n    key: \"_hashLocation\",\n    value: function _hashLocation(location) {\n      return Geohash.encode(location.lat, location.long, 12);\n    }\n  }, {\n    key: \"locationTag\",\n    value: function locationTag(location) {\n      return this._hashLocation(location).slice(0, 6);\n    }\n  }, {\n    key: \"generate\",\n    value: function () {\n      var _generate = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(location, title, content) {\n        var TAG, GEOHASH, DATA, MESSAGE, transfers, trytes, bundle;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                TAG = this.locationTag(location);\n                GEOHASH = this._hashLocation(location);\n                DATA = {\n                  title: title,\n                  content: content,\n                  location: GEOHASH\n                };\n                MESSAGE = JSON.stringify({\n                  message: DATA\n                });\n                transfers = [{\n                  address: ADDRESS,\n                  value: 0,\n                  tag: asciiToTrytes(TAG),\n                  message: asciiToTrytes(MESSAGE)\n                }];\n                _context.next = 7;\n                return this._iota.prepareTransfers(ROOT, transfers);\n\n              case 7:\n                trytes = _context.sent;\n                _context.next = 10;\n                return this._iota.sendTrytes(trytes, DEPTH, WEIGHTMAGNITUDE);\n\n              case 10:\n                bundle = _context.sent;\n                return _context.abrupt(\"return\", bundle);\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function generate(_x, _x2, _x3) {\n        return _generate.apply(this, arguments);\n      }\n\n      return generate;\n    }()\n  }, {\n    key: \"_decode\",\n    value: function _decode(bundle) {\n      var data = JSON.parse(extractJson(bundle));\n      data.timestamp = bundle[0].timestamp;\n      return data;\n    }\n  }, {\n    key: \"find\",\n    value: function () {\n      var _find = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(hash) {\n        var _this = this;\n\n        var TAG, hashes, bundles, _hash, bundle;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                hash = hash.slice(0, 6);\n                TAG = asciiToTrytes(hash);\n                _context2.prev = 2;\n                _context2.next = 5;\n                return this._iota.findTransactions({\n                  tags: [TAG]\n                });\n\n              case 5:\n                hashes = _context2.sent;\n                _context2.next = 12;\n                break;\n\n              case 8:\n                _context2.prev = 8;\n                _context2.t0 = _context2[\"catch\"](2);\n                console.log(_context2.t0);\n                return _context2.abrupt(\"return\", []);\n\n              case 12:\n                bundles = [];\n\n              case 13:\n                _hash = hashes.pop();\n                _context2.prev = 14;\n                _context2.next = 17;\n                return this._iota.getBundle(_hash);\n\n              case 17:\n                bundle = _context2.sent;\n                bundles.push(bundle);\n                _context2.next = 23;\n                break;\n\n              case 21:\n                _context2.prev = 21;\n                _context2.t1 = _context2[\"catch\"](14);\n\n              case 23:\n                if (hashes.length > 0) {\n                  _context2.next = 13;\n                  break;\n                }\n\n              case 24:\n                return _context2.abrupt(\"return\", bundles.map(function (b) {\n                  return _this._decode(b);\n                }));\n\n              case 25:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[2, 8], [14, 21]]);\n      }));\n\n      function find(_x4) {\n        return _find.apply(this, arguments);\n      }\n\n      return find;\n    }()\n  }]);\n\n  return Glonos;\n}();","import React, { useState, useEffect } from 'react';\nimport Messages from './Messages'\nimport './App.css';\nimport { Glonos } from 'glonos'\nimport { composeAPI } from '@iota/core'\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nimport Fab from '@material-ui/core/Fab';\nimport AddIcon from '@material-ui/icons/Add';\nimport SendIcon from '@material-ui/icons/Send';\nimport Modal from '@material-ui/core/Modal';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\n\n\nfunction getModalStyle() {\n  const top = 50\n  const left = 50\n\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`,\n  };\n}\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    position: 'absolute',\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 4),\n    outline: 'none',\n  },\n}));\n\n\nfunction App() {\n  const classes = useStyles();\n\n  const glonos = new Glonos(composeAPI({ provider: 'https://nodes.thetangle.org:443' }));\n\n  const [location, setLocation] = useState('');\n  const [open, setOpen] = useState(false);\n  const [modalStyle] = React.useState(getModalStyle);\n  const [title, setTitle] = useState('');\n  const [content, setContent] = useState('');\n  const [sending, setSending] = useState(false);\n  const [geolocation, setGeolocation] = useState(undefined);\n  const handleOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleSend = () => {\n    async function send() {\n      setSending(true);\n      await glonos.generate({ lat: geolocation.latitude, long: geolocation.longitude }, title, content);\n      setSending(false);\n      handleClose();\n    }\n\n    send();\n  }\n\n  useEffect(() => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(async pos => {\n        const data = glonos.locationTag({ lat: pos.coords.latitude, long: pos.coords.longitude })\n        setLocation(data);\n        setGeolocation(pos.coords);\n      })\n    }\n    const handle = setInterval(() => {\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(async pos => {\n          const data = glonos.locationTag({ lat: pos.coords.latitude, long: pos.coords.longitude })\n          if (location !== data) {\n\n            setLocation(data)\n            setGeolocation(pos.coords);\n          }\n        })\n      }\n    }, 5000);\n\n    return () => {\n      clearInterval(handle);\n    }\n\n  }, [])\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <Modal\n          aria-labelledby=\"simple-modal-title\"\n          aria-describedby=\"simple-modal-description\"\n          open={open}\n          onClose={handleClose}\n        >\n\n          <div style={modalStyle} className={classes.paper}>\n            <div>\n              <TextField\n                id=\"outlined-name\"\n                label=\"Title\"\n                //className={classes.textField}\n                value={title}\n                onChange={(event) => { setTitle(event.target.value) }}\n                margin=\"normal\"\n\n                variant=\"outlined\"\n              />\n            </div>\n            <div>\n\n              <TextField\n                id=\"outlined-name\"\n                label=\"Content\"\n                //className={classes.textField}\n                value={content}\n                onChange={(event) => { setContent(event.target.value) }}\n                margin=\"normal\"\n                variant=\"outlined\"\n                multiline={true}\n              />\n\n            </div>\n            <Fab color=\"primary\" aria-label=\"Send\" onClick={handleSend}>\n              {sending ? <CircularProgress /> :\n                <SendIcon />\n              }\n            </Fab>\n\n\n          </div>\n        </Modal>\n        <Messages glonos={glonos} location={location} />\n        <Fab color=\"primary\" aria-label=\"Add\" onClick={handleOpen}>\n          <AddIcon />\n        </Fab>\n        <p>\n          Your location is {location}\n        </p>\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}